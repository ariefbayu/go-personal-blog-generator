<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="/admin/css/styles.css" />
</head>

<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-inner">
                <!-- User Profile / Branding -->
                <div class="sidebar-brand">
                    <div class="sidebar-avatar"
                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDS7stXzuX1oFmiWsscJ6UQdJia4HQqQ1S3B16IX81s9nLilZo5vQ9BHxeqlt4NLtH425M6taGrBpy855X1FQs5QZ5zR4b614Pe9OSUye680Mn-KK-3gwBlS5hLP22HQ6eC6KTcc088z_JpDFT57Ea5gYr3cATEVUOQcbT_MnZ5Hpw3pfOj4f1-4dRnnid5Cm68psmooaxIMYwQBDjYdxFvDSZ3iloQdT-DW2iwFnxZnRrdpFz8wzZDsH9O0b5tiSgtFKN7kg8CTlsh");'>
                    </div>
                    <div class="sidebar-info">
                        <h1 class="sidebar-title">
                            <a href="/admin/dashboard" class="nav-brand-link">
                                My Personal Blog
                            </a>
                        </h1>
                        <p class="sidebar-subtitle">Admin Console</p>
                    </div>
                </div>
                <!-- Navigation Links -->
                <nav class="sidebar-nav">
                    <a class="nav-item nav-item-active" href="/admin/dashboard">
                        <span class="material-symbols-outlined">home</span>
                        <span>Dashboard</span>
                    </a>
                    <a class="nav-item" href="/admin/posts">
                        <span class="material-symbols-outlined">book_2</span>
                        <span>Blog Posts</span>
                    </a>
                    <a class="nav-item" href="/admin/portfolio">
                        <span class="material-symbols-outlined">work</span>
                        <span>Portfolios</span>
                    </a>
                    <a class="nav-item" href="/admin/pages">
                        <span class="material-symbols-outlined">code</span>
                        <span>Pages</span>
                    </a>
                    <a class="nav-item" href="/admin/settings">
                        <span class="material-symbols-outlined">settings</span>
                        <span>Settings</span>
                    </a>
                </nav>
            </div>
            <!-- Logout Section -->
            <div class="sidebar-footer">
            </div>
        </div>
        <!-- Main Content -->
        <div class="admin-main">
            <!-- Top Bar for Mobile -->
            <header class="admin-header-mobile">
                <h1 class="admin-header-title">Admin Dashboard</h1>
                <button class="admin-header-menu-btn">
                    <span class="material-symbols-outlined">menu</span>
                </button>
            </header>
            <main class="admin-content">
                <div class="admin-container">
                    <!-- Page Heading & Actions -->
                    <div class="admin-page-header">
                        <div>
                            <h2 class="admin-page-title">Admin Dashboard</h2>
                            <p class="admin-page-subtitle">Welcome to the admin interface.</p>
                        </div>
                        <div class="admin-page-actions">
                            <button id="publish-site-btn" class="btn btn-success">
                                <span class="material-symbols-outlined">publish</span>
                                <span>Publish Site</span>
                            </button>
                            <a href="/admin/posts/new" class="btn btn-primary">
                                <span class="material-symbols-outlined">add</span>
                                <span>Create New Blog</span>
                            </a>
                        </div>
                    </div>

                    <!-- Content Card -->
                    <div class="admin-card">
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script>
        document.getElementById('publish-site-btn').addEventListener('click', async function() {
            // Show loading state
            const btn = this;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<span class="material-symbols-outlined">refresh</span><span>Publishing...</span>';
            btn.disabled = true;

            try {
                const response = await fetch('/api/publish', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const result = await response.json();

                if (response.ok) {
                    alert(`Site published successfully! Generated ${result.count} post pages.`);
                } else {
                    alert(`Publish failed: ${result.error}`);
                }
            } catch (error) {
                console.error('Publish error:', error);
                alert('Network error. Please try again.');
            } finally {
                // Restore button state
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });
    </script>
</body>

</html>